<polymer-element name="star-slide">

    <template class="transparent">
        <style media="screen">
            :host {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                opacity: 0;
            }

            :host(.show) {
                opacity: 1;
            }

        </style>
        <content id="content" class="transparent"></content>
    </template>

    <script charset="utf-8">
        (function( root ) {

            Polymer( 'star-slide', {

                contents: null,

                /**
                 * Published properties
                 */
                publish: {
                    /**
                     * Is the element showing
                     *
                     * @property _showing
                     * @type boolean
                     */
                    _showing: false
                },


                /*-----------------------------------------------------------*\
                 *
                 *  Polymer lifecycle events
                 *
                \*-----------------------------------------------------------*/


                /**
                 * Fired when Polymer has got the element ready
                 */
                ready: function() {
                    this.bindAll( this );
                    this.contents = [];
                },


                /**
                 * Light DOM should be ready by now so grab all the relevant child nodes
                 */
                attached: function() {
                    var elements = this.querySelectorAll( 'star-element' );

                    Array.prototype.forEach.call( elements, function( el ) {
                        this.contents.push( el );
                    }.bind( this ));
                },


                /*-----------------------------------------------------------*\
                 *
                 *  Events
                 *
                \*-----------------------------------------------------------*/

                eventDelegates: {
                    down: 'downAction',
                    up: 'upAction'
                },

                /**
                 * Abstract for initial touch on element
                 */
                downAction: function( event ) {},

                /**
                 * A click starts state transition to loading if the element is shown and not already loading
                 */
                upAction: function( event ) {},


                /*-----------------------------------------------------------*\
                 *
                 *  Methods
                 *
                \*-----------------------------------------------------------*/

                show: function() {
                    this.classList.add( 'show' );

                    this.contents.forEach( function( el, index ) {
                        setTimeout( function() {
                            el.show();
                        }.bind( this ), 500 * index );
                    }.bind( this ));
                },



                /*-----------------------------------------------------------*\
                 *
                 *  Helpers
                 *
                \*-----------------------------------------------------------*/


                /**
                 * Simple, dirty bindAll implementation
                 *
                 * @param ctx {Object} the context to bind `this` to
                 */
                bindAll: function( ctx ) {
                    for ( method in this ) {
                        if ( typeof this[ method ] === 'function' && !this.hasOwnProperty( method ) ) {
                            try {
                                this[ method ] = this[ method ].bind( ctx );
                            } catch( err ) {
                                console.log( this.element.name + '::', 'method binding error\n', method, err );
                            }
                        }
                    }
                }


            });


        })( this );
    </script>
</polymer-element>
